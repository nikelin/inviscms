#summary Подход к реализации процесса установки системы
#labels Phase-Implementation,Phase-Design,Featured

=== This story in English: [InstallationProcces_Eng Read] ===

= Обзор =

В данной статье описаны основные идеи и подходы к реализации процесса инсталляции системы на компьютере пользователя.


= Детали =

Поскольку основной целью и идеей системы является воплощении расширяемой и гибкой плафтормы для разработки разнообразнейших веб-проектов, и в целом её функциональная структура и наполнение не определены на момент её инсталляции, а собственно и не известен список модулей, собственно и процесс "*first-time*" конфигурирования должен ложиться на плечи пакетов, входящих в поставку системы.

На первом шаге установки системы пользователь вводит основную информацию, а именно:
 
  # Пароль и логин пользователя с профилем *root*.
  # Системные пути (*URL* путь к системе, путь к системе в файловой среде).
 
А так же выбирает список модулей, которые он хочет сделать активными, и позволить функционирование.

Далее, на втором шаге установки, система проверяет список выбранных пакетов, и если параметр "*need-install*"  в их конфигурационном файле (см. "*Архитектура движка?*") установлен в значение "*yes*", то система подключает файл *install.php* из директории "*{%package%}/.install/proceed.php*".

Настройка пакетов происходит в стековом режиме, учитывая зависимости между ними, то есть процесс конфигурации пакета, который зависит от некоторого другого пакета, начнётся не раньше чем произойдёт настройка пакета, от которого он зависит.

Признаком успешного завершения настройки пакета будет служить создание переменной (со стороны установочного файла пакета) сессии с именем "*md5({%pack%}_success)*".
В любом случае, пользователь может в ручном режиме (нажав на ссылку "Игнорировать") пропустить настройку данного пакета, если его значимость (*importance*), указанная в конфигурационном файле не стоит в значении ` *critical*`. Если же её значение `*critical*`, то инсталляция завершается в аварийном режиме, иначе система сама добавляет переменную сессии определяющую статус установки данного пакета как "*успешный*".

Третьим шагом, после процесса конфигурирования пакетов, следует процесс настройки модулей, который полностью идентичен процессе настройки пакетов.

По окончанию, система выдаёт пользователю отчёт об *успешно/не* успешно установленных модулях/пакетах, и, в зависимости от исхода процесса инсталляции в целом, сообщает об успешной либо не успешной установке системы.

На системном уровне происходит обработка следующих событий:

  # Переход от одной фазы установки к другой
  # Переход от настройки одного модуля/пакета к другому
  # Исход настройки некоторого модуля/пакета
  # Ошибки связанные с подключением пакетов/модулей и обработкой их конфигурационных файлов
  # Результат процесса инсталяции


Если говорит о процессе сбора ошибок/сообщений относительно контекста настраиваемых модулей/пакетов, то следует заметить, что в начале процесса установки системы, создаётся глобальная среда для записи системных сообщений для всех модулей, информация из которой в последствии будет добавлена и основному файлу истории, и именно в неё должны писать ошибки/сообщения все модули в контексте процесса *first-time* настройки.


После того, как процесс установки будет завершён, ко всем установленным модулям в папку *./.install* будет добавлен файл *.lock*, который будет свидетельствовать о том, что данный модуль прошёл фазу первичной установки. 
 